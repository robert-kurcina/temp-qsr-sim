
const fs = require('fs');
const path = require('path');

const dataDir = path.join(__dirname, '..', 'src', 'data');
const outputDir = path.join(__dirname, '..', 'src', 'lib');
const outputFile = path.join(outputDir, 'data.ts');

if (!fs.existsSync(outputDir)) {
  fs.mkdirSync(outputDir, { recursive: true });
}

const bundledData = {};

fs.readdirSync(dataDir).forEach(file => {
  if (file.endsWith('.json')) {
    const filePath = path.join(dataDir, file);
    const fileName = path.basename(file, '.json');
    const fileContent = fs.readFileSync(filePath, 'utf-8');
    bundledData[fileName] = JSON.parse(fileContent);
  }
});

const outputContent = `// This file is generated by scripts/bundle-data.js
// Do not edit this file directly.

export const gameData = ${JSON.stringify(bundledData, null, 2)};
`;

fs.writeFileSync(outputFile, outputContent);

console.log('Game data bundled successfully!');
